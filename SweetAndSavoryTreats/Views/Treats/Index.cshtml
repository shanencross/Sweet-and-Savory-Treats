@{
  Layout = "_Layout";
}
@using SweetAndSavoryTreats.Models;
@using System.Collections.Generic;
@model ICollection<SweetAndSavoryTreats.Models.Treat>;

<h1>Treats</h1>
@if (Model.Count == 0)
{
  <p>Wait, there are no treats?? A logged-in user needs to add some!</p>
}

<ul>
  @foreach (Treat treat in Model)
  {
    <li>@Html.ActionLink(treat.Name, "Details", new { id = treat.TreatId }): $@treat.Price.ToString("F2")</li>
    <li> Flavors:
      <ul>
        @foreach (FlavorTreat flavorTreat in treat.FlavorTreats)
        {
          Flavor flavor = flavorTreat.Flavor;
          <li>@Html.ActionLink(flavor.Name, "Details", "Flavors", new { id = flavor.FlavorId })</li>
        }
      </ul>
    </li>
  }
</ul>
<br>
<p>
@if (User.Identity.IsAuthenticated)
{
  @Html.ActionLink("Add Treat", "Create")<br>
}
@Html.ActionLink("Return to Home", "Index", "Home")
</p>